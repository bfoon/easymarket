{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

<div class="shipment-detail-wrapper">
  <!-- Background Elements -->
  <div class="background-elements">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
  </div>

  <div class="shipment-detail-container">
    <!-- Header Section -->
    <div class="detail-header">
      <div class="header-content">
        <div class="shipment-title-section">
          <div class="breadcrumb">
            <a href="{% url 'logistics:shipment_list' %}" class="breadcrumb-link">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
              </svg>
              All Shipments
            </a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">Shipment #{{ shipment.id }}</span>
          </div>
          <h1 class="shipment-title">
            <svg class="title-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 3h5v5"></path>
              <path d="M8 3H3v5"></path>
              <path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"></path>
              <path d="M21 3l-7.828 7.828A4 4 0 0 0 12 13.828V22"></path>
            </svg>
            Shipment #{{ shipment.id }}
          </h1>
          <p class="shipment-subtitle">Complete shipment tracking and details</p>
        </div>

        <div class="status-badge-container">
          <div class="status-badge status-{{ shipment.status|lower }}">
            {% if shipment.status|lower == 'pending' %}
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 6v6l4 2"></path>
              </svg>
            {% elif shipment.status|lower == 'in_transit' %}
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"></path>
                <path d="M15 18H9"></path>
                <path d="M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14"></path>
                <circle cx="17" cy="18" r="2"></circle>
                <circle cx="7" cy="18" r="2"></circle>
              </svg>
            {% elif shipment.status|lower == 'shipped' %}
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"></path>
                <circle cx="12" cy="12" r="10"></circle>
              </svg>
            {% elif shipment.status|lower == 'delivered' %}
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"></path>
                <circle cx="12" cy="12" r="10"></circle>
              </svg>
            {% else %}
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
            {% endif %}
            <span>{{ shipment.status|title }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Progress Timeline -->
    <div class="progress-timeline">
      <div class="timeline-container">
        <div class="timeline-step {% if shipment.status == 'pending' or shipment.status == 'in_transit' or shipment.status == 'shipped' or shipment.status == 'delivered' %}completed{% endif %}">
          <div class="step-indicator">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          </div>
          <div class="step-content">
            <div class="step-title">Order Created</div>
            <div class="step-time">{{ shipment.created_at|date:"M d, Y H:i" }}</div>
          </div>
        </div>

        <div class="timeline-step {% if shipment.status == 'in_transit' or shipment.status == 'shipped' or shipment.status == 'delivered' %}completed{% endif %}">
          <div class="step-indicator">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
          </div>
          <div class="step-content">
            <div class="step-title">In Transit</div>
            <div class="step-time">{% if shipment.collect_time %}{{ shipment.collect_time|date:"M d, Y H:i" }}{% else %}Pending{% endif %}</div>
          </div>
        </div>

        <div class="timeline-step {% if shipment.status == 'shipped' or shipment.status == 'delivered' %}completed{% endif %}">
          <div class="step-indicator">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"></path>
              <path d="M15 18H9"></path>
              <path d="M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14"></path>
              <circle cx="17" cy="18" r="2"></circle>
              <circle cx="7" cy="18" r="2"></circle>
            </svg>
          </div>
          <div class="step-content">
            <div class="step-title">Shipped</div>
            <div class="step-time">{% if shipment.status == 'shipped' or shipment.status == 'delivered' %}Recently{% else %}Pending{% endif %}</div>
          </div>
        </div>

        <div class="timeline-step {% if shipment.status == 'delivered' %}completed{% endif %}">
          <div class="step-indicator">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          </div>
          <div class="step-content">
            <div class="step-title">Delivered</div>
            <div class="step-time">{{ shipment.estimated_dropoff_time|date:"M d, Y H:i" }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Package Information -->
      <div class="info-card package-info">
        <div class="card-header">
          <div class="card-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
              <polyline points="3.27,6.96 12,12.01 20.73,6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            Package Information
          </div>
          <div class="card-badge">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
            Verified
          </div>
        </div>
        <div class="card-content">
          <div class="info-grid">
            <div class="info-item">
              <div class="info-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                </svg>
              </div>
              <div class="info-content">
                <div class="info-label">Weight</div>
                <div class="info-value">{{ shipment.weight_kg }} kg</div>
              </div>
            </div>

            <div class="info-item">
              <div class="info-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 3h6l2 13h7l4-8H9"></path>
                  <circle cx="18" cy="20" r="1"></circle>
                  <circle cx="9" cy="20" r="1"></circle>
                </svg>
              </div>
              <div class="info-content">
                <div class="info-label">Volume</div>
                <div class="info-value">{{ shipment.size_cubic_meters }} mÂ³</div>
              </div>
            </div>

            <div class="info-item">
              <div class="info-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                  <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                </svg>
              </div>
              <div class="info-content">
                <div class="info-label">Material Type</div>
                <div class="info-value">{{ shipment.material_type|title }}</div>
              </div>
            </div>

            {% if shipment.shipment_type %}
            <div class="info-item">
              <div class="info-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 3h5v5"></path>
                  <path d="M8 3H3v5"></path>
                  <path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"></path>
                  <path d="M21 3l-7.828 7.828A4 4 0 0 0 12 13.828V22"></path>
                </svg>
              </div>
              <div class="info-content">
                <div class="info-label">Shipment Type</div>
                <div class="info-value">{{ shipment.shipment_type|title }}</div>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Logistics Information -->
      <div class="info-card logistics-info">
        <div class="card-header">
          <div class="card-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"></path>
              <path d="M15 18H9"></path>
              <path d="M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14"></path>
              <circle cx="17" cy="18" r="2"></circle>
              <circle cx="7" cy="18" r="2"></circle>
            </svg>
            Logistics Team
          </div>
          <div class="card-badge logistics-badge">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
              <line x1="9" y1="9" x2="9.01" y2="9"></line>
              <line x1="15" y1="9" x2="15.01" y2="9"></line>
            </svg>
            Active
          </div>
        </div>
        <div class="card-content">
          <div class="team-member">
            <div class="member-avatar">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
            <div class="member-info">
              <div class="member-name">{{ shipment.driver|default:"Unassigned" }}</div>
              <div class="member-role">Driver</div>
            </div>
            {% if shipment.driver %}
            <div class="member-status online">
              <div class="status-dot"></div>
              <span>Available</span>
            </div>
            {% endif %}
          </div>

          <div class="vehicle-info">
            <div class="vehicle-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"></path>
                <path d="M15 18H9"></path>
                <path d="M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14"></path>
                <circle cx="17" cy="18" r="2"></circle>
                <circle cx="7" cy="18" r="2"></circle>
              </svg>
            </div>
            <div class="vehicle-details">
              <div class="vehicle-name">{{ shipment.vehicle|default:"No vehicle assigned" }}</div>
              <div class="vehicle-type">Delivery Vehicle</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Schedule Information -->
      <div class="info-card schedule-info">
        <div class="card-header">
          <div class="card-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
            Schedule & Timing
          </div>
          <div class="card-badge schedule-badge">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
            On Track
          </div>
        </div>
        <div class="card-content">
          <div class="schedule-item">
            <div class="schedule-icon pickup">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"></path>
              </svg>
            </div>
            <div class="schedule-content">
              <div class="schedule-label">Collection Time</div>
              <div class="schedule-value">
                {% if shipment.collect_time %}
                  {{ shipment.collect_time|date:"M d, Y H:i" }}
                {% else %}
                  <span class="text-muted">Not scheduled</span>
                {% endif %}
              </div>
            </div>
          </div>

          <div class="schedule-divider"></div>

          <div class="schedule-item">
            <div class="schedule-icon delivery">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
            </div>
            <div class="schedule-content">
              <div class="schedule-label">Estimated Delivery</div>
              <div class="schedule-value">{{ shipment.estimated_dropoff_time|date:"M d, Y H:i" }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="info-card actions-card">
        <div class="card-header">
          <div class="card-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
            Quick Actions
          </div>
        </div>
        <div class="card-content">
          <div class="actions-grid">
            {% if shipment.status != 'shipped' %}
            <a href="{% url 'logistics:mark_order_as_shipped' shipment.order.id %}" class="action-btn primary-action" id="ship-btn">
              <div class="action-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 3h5v5"></path>
                  <path d="M8 3H3v5"></path>
                  <path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"></path>
                  <path d="M21 3l-7.828 7.828A4 4 0 0 0 12 13.828V22"></path>
                </svg>
              </div>
              <span>Mark as Shipped</span>
            </a>
            {% endif %}

            <button class="action-btn secondary-action" onclick="printShipment()">
              <div class="action-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6,9 6,2 18,2 18,9"></polyline>
                  <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                  <rect x="6" y="14" width="12" height="8"></rect>
                </svg>
              </div>
              <span>Print Label</span>
            </button>

            <button class="action-btn secondary-action" onclick="shareShipment()">
              <div class="action-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                  <polyline points="16,6 12,2 8,6"></polyline>
                  <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
              </div>
              <span>Share</span>
            </button>

            <a href="{% url 'logistics:shipment_list' %}" class="action-btn tertiary-action">
              <div class="action-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
              </div>
              <span>Back to List</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.shipment-detail-wrapper {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  position: relative;
  overflow: hidden;
}

.background-elements {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}

.floating-shape {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  animation: float 6s ease-in-out infinite;
}

.shape-1 {
  width: 80px;
  height: 80px;
  top: 20%;
  left: 10%;
  animation-delay: 0s;
}

.shape-2 {
  width: 120px;
  height: 120px;
  top: 60%;
  right: 15%;
  animation-delay: 2s;
}

.shape-3 {
  width: 60px;
  height: 60px;
  bottom: 20%;
  left: 20%;
  animation-delay: 4s;
}

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  33% { transform: translateY(-20px) rotate(120deg); }
  66% { transform: translateY(10px) rotate(240deg); }
}

.shipment-detail-container {
  position: relative;
  z-index: 1;
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

.detail-header {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 2.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 2rem;
}

.breadcrumb {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  font-size: 0.9rem;
}

.breadcrumb-link {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: #667eea;
  text-decoration: none;
  transition: all 0.2s ease;
}

.breadcrumb-link:hover {
  color: #5a67d8;
  text-decoration: none;
}

.breadcrumb-separator {
  color: #a0aec0;
}

.breadcrumb-current {
  color: #4a5568;
  font-weight: 500;
}

.shipment-title {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 2.5rem;
  font-weight: 700;
  color: #1a202c;
  margin: 0 0 0.5rem 0;
}

.title-icon {
  color: #667eea;
}

.shipment-subtitle {
  color: #718096;
  font-size: 1.1rem;
  margin: 0;
}

.status-badge-container {
  display: flex;
  align-items: center;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 600;
  text-transform: capitalize;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.status-pending {
  background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
  color: #92400e;
}

.status-in_transit {
  background: linear-gradient(135deg, #dbeafe 0%, #60a5fa 100%);
  color: #1e40af;
}

.status-shipped {
  background: linear-gradient(135deg, #d1fae5 0%, #34d399 100%);
  color: #065f46;
}

.status-delivered {
  background: linear-gradient(135deg, #d1fae5 0%, #10b981 100%);
  color: #065f46;
}

.progress-timeline {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.timeline-container {
  display: flex;
  justify-content: space-between;
  position: relative;
}

.timeline-container::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 20px;
  right: 20px;
  height: 2px;
  background: #e2e8f0;
  z-index: 0;
}

.timeline-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  z-index: 1;
  flex: 1;
}

.step-indicator {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #e2e8f0;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1rem;
  transition: all 0.3s ease;
  border: 3px solid white;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.timeline-step.completed .step-indicator {
  background: linear-gradient(135deg, #10b981 0%, #065f46 100%);
  color: white;
}

.step-content {
  text-align: center;
}

.step-title {
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.25rem;
}

.step-time {
  font-size: 0.875rem;
  color: #6b7280;
}

.content-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2rem;
}

.info-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.info-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #f1f5f9;
}

.card-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.25rem;
  font-weight: 600;
  color: #1e293b;
}

.card-badge {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  color: #166534;
  padding: 0.5rem 1rem;
  border-radius: 12px;
  font-size: 0.875rem;
  font-weight: 500;
}

.logistics-badge {
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
  color: #1e40af;
}

.schedule-badge {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  color: #92400e;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
}

.info-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
}

.info-icon {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

.info-content {
  flex: 1;
}

.info-label {
  font-size: 0.875rem;
  color: #64748b;
  font-weight: 500;
  margin-bottom: 0.25rem;
}

.info-value {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1e293b;
}

.team-member {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.member-avatar {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.member-info {
  flex: 1;
}

.member-name {
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 0.25rem;
}

.member-role {
  font-size: 0.875rem;
  color: #64748b;
}

.member-status {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  font-weight: 500;
}

.member-status.online {
  color: #059669;
}

.status-dot {
  width: 8px;
  height: 8px;
  background: #10b981;
  border-radius: 50%;
}

.vehicle-info {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #f8fafc;
  border-radius: 12px;
}

.vehicle-icon {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.vehicle-name {
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 0.25rem;
}

.vehicle-type {
  font-size: 0.875rem;
  color: #64748b;
}

.schedule-item {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.schedule-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.schedule-icon.pickup {
  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
}

.schedule-icon.delivery {
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
}

.schedule-label {
  font-size: 0.875rem;
  color: #64748b;
  font-weight: 500;
  margin-bottom: 0.25rem;
}

.schedule-value {
  font-weight: 600;
  color: #1e293b;
}

.schedule-divider {
  height: 1px;
  background: #e2e8f0;
  margin: 1.5rem 0;
}

.text-muted {
  color: #9ca3af;
  font-style: italic;
}

.actions-grid {
  display: grid;
  gap: 1rem;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-size: 1rem;
}

.action-icon {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.2);
}

.primary-action {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.primary-action:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
  color: white;
  text-decoration: none;
}

.secondary-action {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.secondary-action:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
  color: white;
}

.tertiary-action {
  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
  color: #475569;
  border: 1px solid #e2e8f0;
}

.tertiary-action:hover {
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
  color: #334155;
  text-decoration: none;
  transform: translateY(-2px);
}

@media (max-width: 768px) {
  .shipment-detail-container {
    padding: 1rem;
  }

  .header-content {
    flex-direction: column;
    text-align: center;
  }

  .shipment-title {
    font-size: 2rem;
    justify-content: center;
  }

  .content-grid {
    grid-template-columns: 1fr;
  }

  .timeline-container {
    flex-direction: column;
    gap: 2rem;
  }

  .timeline-container::before {
    display: none;
  }

  .timeline-step {
    flex-direction: row;
    text-align: left;
  }

  .step-indicator {
    margin-bottom: 0;
    margin-right: 1rem;
  }

  .info-grid {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add entrance animations
  const cards = document.querySelectorAll('.info-card');
  cards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';
    card.style.transition = 'all 0.6s ease';

    setTimeout(() => {
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, index * 150);
  });

  // Enhanced ship button with loading state
  const shipBtn = document.getElementById('ship-btn');
  if (shipBtn) {
    shipBtn.addEventListener('click', function(e) {
      e.preventDefault();

      // Add loading state
      const originalContent = this.innerHTML;
      this.innerHTML = `
        <div class="action-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"/>
          </svg>
        </div>
        <span>Processing...</span>
      `;
      this.style.pointerEvents = 'none';

      // Simulate processing then redirect
      setTimeout(() => {
        window.location.href = this.getAttribute('href');
      }, 1500);
    });
  }
});

function printShipment() {
  window.print();
}

function shareShipment() {
  if (navigator.share) {
    navigator.share({
      title: 'Shipment #{{ shipment.id }}',
      text: 'Track this shipment',
      url: window.location.href
    });
  } else {
    // Fallback - copy to clipboard
    navigator.clipboard.writeText(window.location.href).then(() => {
      alert('Shipment link copied to clipboard!');
    });
  }
}
</script>

<script src="{% static 'js/main.js' %}"></script>
{% endblock %}